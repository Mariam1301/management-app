<ng-content></ng-content> @if(title){
<h1 class="font-primeng font-semibold text-xl mb-5">{{ title }}</h1>
} @if(showAddButton){
<div class="flex w-full justify-end mb-5">
  <button
    class="p-button w-full sm:w-fit justify-center flex gap-2 items-center"
    (click)="addButtonClicked.emit()"
  >
    <ui-icon name="plus" [size]="18" color="pointer"></ui-icon>
    <p class="font-primeng">დამატება</p>
  </button>
</div>
} @if(isLoading&&loaderId){
<div class="hidden sm:block">
  <p-skeleton height="2rem" styleClass="mb-2" />
  <p-skeleton height="2rem" styleClass="mb-2" />
  <p-skeleton height="2rem" styleClass="mb-2" />
  <p-skeleton height="2rem" styleClass="mb-2" />
  <p-skeleton height="2rem" styleClass="mb-2" />
  <p-skeleton height="2rem" styleClass="mb-2" />
  <p-skeleton height="2rem" styleClass="mb-2" />
  <p-skeleton height="2rem" styleClass="mb-2" />
  <p-skeleton height="2rem" styleClass="mb-2" />
  <p-skeleton height="2rem" styleClass="mb-2" />
</div>

<div class="sm:hidden">
  <p-skeleton width="100%" height="10rem" styleClass="mb-4" />
  <p-skeleton width="100%" height="10rem" styleClass="mb-4" />
  <p-skeleton width="100%" height="10rem" styleClass="mb-4" />
</div>

}@else{ @if((data?.length||0)>0){
<div class="hidden sm:block border border-primeng-surface-200">
  <p-table
    [paginator]="(data?.length || 0) > 10"
    [value]="data || []"
    [rows]="10"
    [totalRecords]="data?.length || 0"
    [tableStyle]="{ 'min-width': '50rem' }"
  >
    <ng-template pTemplate="header">
      <tr>
        @for(column of columnList; track column.name){
        <th class="font-primeng">{{ column.name }}</th>
        } @if(showDeleteButton){
        <th></th>
        }
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-row>
      <tr class="hover:bg-primeng-surface-100" (click)="rowClicked.emit(row)">
        @for(column of columnList; track column.name){
        <td>
          @if(column.templateRef ){

          <ng-container
            *ngTemplateOutlet="
              column.template?.template;
              context: { $implicit: row }
            "
          ></ng-container>

          }@else{

          <p>{{ row[column.valueField] || "" }}</p>

          }
        </td>
        } @if(showDeleteButton){
        <td>
          <button (click)="onDeleteClick($event, row)" class="p-2">
            <ui-icon name="trash" [size]="16"></ui-icon>
          </button>
        </td>
        }
      </tr>
    </ng-template>
  </p-table>
</div>

<div class="sm:hidden">
  @for( dataItem of data; track dataItem[trackPropertyName]){
  <button
    class="w-full pt-4 border border-primeng-surface-200 bg-primeng-surface-0 max-w-full rounded-md my-3"
    (click)="rowClicked.emit(dataItem)"
  >
    @for(column of columnList; track column.name){
    <div class="flex items-center justify-between truncate">
      <div class="flex items-center gap-2 my-1 px-4 truncate">
        <p class="font-bold font-primeng text-sm">{{ column.name }}:</p>
        <p class="truncate font-primeng text-sm">
          @if(column.templateRef ){

          <ng-container
            *ngTemplateOutlet="
              column.template?.template;
              context: { $implicit: dataItem }
            "
          ></ng-container>

          }@else{

          {{ dataItem[column.valueField] || "" }}

          }
        </p>
      </div>
    </div>

    }
    <button
      (click)="onDeleteClick($event, dataItem)"
      label="delete"
      name="delete"
      class="py-4 mt-4 border-t w-full flex items-center justify-center border-dashed"
    >
      <ui-icon name="trash" color="pointer" [size]="16"></ui-icon>
    </button></button
  >}
</div>
}@else {
<p class="w-full text-center font-primeng py-5 text-primeng-surface-400">
  ჩანაწერი არ არის
</p>
} }
